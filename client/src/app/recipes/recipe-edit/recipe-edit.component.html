<div style="display: flex; align-items: center">
  <form *ngIf="recipeForm" [formGroup]="recipeForm" (ngSubmit)="onSubmit()">
    <div class="row">
      <!-- Recipe name  -->
      <div class="row">
        <div class="col-xs-12">
          <div class="form-group">
            <label for="name">Name</label>

            <input
              type="text"
              name=""
              id="name"
              class="form-control"
              formControlName="name"
            />
          </div>
        </div>
      </div>

      <!-- Ingredients  -->
      <div class="row my-4">
        <div
          class="col-md-12"
          style="overflow-x: hidden; transition: 0.2s height ease"
          formArrayName="ingredients"
        >
          <div style="display: flex; align-items: center">
            <label class="my-2 me-3">Ingredients</label>
            <button
              type="button"
              class="btn btn-primary"
              style="width: fit-content"
              (click)="onAddIngredient()"
            >
              Add Ingredient
            </button>

            <button
              type="button"
              class="btn btn-danger"
              style="margin-left: 1.2rem"
              (click)="onRemoveAllIngredients()"
            >
              Remove All
            </button>
          </div>
          <hr />

          <div
            id="ingredient-group"
            class="form-group row"
            *ngFor="let ingredient of controls; let i = index"
            [formGroupName]="i"
            style="margin-bottom: 1.2rem"
            [@fade-out]
          >
            <div class="col-md-4">
              <input
                type="text"
                name="name"
                id="name"
                class="form-control"
                formControlName="name"
                placeholder="Name"
              />
            </div>
            <div class="col-md-4">
              <input
                type="number"
                name="amount"
                id="amount"
                class="form-control"
                formControlName="amount"
                placeholder="Amount"
              />
            </div>

            <div class="col-md-4">
              <button
                type="button"
                class="btn btn-danger"
                (click)="onDeleteIngredient(i)"
              >
                <fa-icon
                  [icon]="faTrash"
                  [style]="{ padding: '0 1rem' }"
                ></fa-icon>
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Recipe description  -->
      <div class="row mb-3">
        <div class="col-xs-12">
          <div class="form-group">
            <label for="description">Description</label>
            <textarea
              name=""
              id="description"
              rows="6"
              class="form-control"
              formControlName="description"
            ></textarea>
          </div>
        </div>
      </div>

      <!-- Image url  -->

      <div class="row">
        <div class="col-xs-12">
          <div class="form-group">
            <label for="imagePath"
              >Image {{ imagePreview.length < 1 ? "Upload" : "Preview" }}</label
            >
          </div>
        </div>
      </div>

      <!-- Image preview  -->
      <div class="row">
        <div class="col-xs-12">
          <img
            [src]="imagePreview"
            alt=""
            class="img-responsive img-thumbnail"
            width="80%"
            [style]="
              imagePreview.length < 1
                ? 'visibility: hidden'
                : 'visibility: visible'
            "
            style="margin: auto"
            height="300px"
          />
        </div>
      </div>

      <app-file-uploader
        (preview-event)="onImageUploaded($event)"
      ></app-file-uploader>

      <!-- Buttons  -->
      <div style="margin-bottom: 1.5rem; margin-top: 2rem; margin-left: 2rem">
        <button
          style="margin-right: 2rem; padding: 0.5rem 2rem"
          type="submit"
          class="btn btn-success"
          [disabled]="!recipeForm.valid"
        >
          Save
        </button>
        <button
          style="padding: 0.5rem 1.5rem"
          type="button"
          class="btn btn-danger"
          (click)="onCancelForm()"
        >
          Cancel
        </button>
      </div>
    </div>
  </form>
</div>
